<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="style.css">
    <!-- Firebase SDK v11 -->
    <script type="module">
        // Import the necessary Firebase functions
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-auth.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-analytics.js";
    </script>
</head>
<body>
    <div class="login-container">
        <img src="logo.png" alt="Logo" class="logo">
        <input type="email" id="username" placeholder="USERNAME" required>
        <input type="password" id="password" placeholder="PASSWORD" required>
        <p class="forgot-password">Forgot password? <a href="#">Contact Admin</a></p>
        <button class="login-button" onclick="login()">LOG IN</button>
        <p id="error-message"></p>
    </div>

    <script type="module">
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCvI3y5mQ4TWOhbnHH6OSB3GzeNcFpe7LM",
            authDomain: "cenro-3ffc4.firebaseapp.com",
            projectId: "cenro-3ffc4",
            storageBucket: "cenro-3ffc4.firebasestorage.app",
            messagingSenderId: "763027479113",
            appId: "1:763027479113:web:e7ff66db1267c091c77d98",
            measurementId: "G-CQSD8JRXMT"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const analytics = getAnalytics(app);

        // Login function
        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            // Check if the fields are filled
            if (!username || !password) {
                document.getElementById('error-message').textContent = "Please fill in all fields.";
                return;
            }

            // Use Firebase Authentication to sign in
            signInWithEmailAndPassword(auth, username, password)
                .then((userCredential) => {
                    // Redirect to dashboard or success page
                    window.location.href = 'dashboard.html'; // Change to your actual dashboard page
                })
                .catch((error) => {
                    // Handle error and display message
                    let errorMessage;
                    switch (error.code) {
                        case 'auth/invalid-email':
                            errorMessage = "The email address is badly formatted.";
                            break;
                        case 'auth/user-not-found':
                            errorMessage = "No user found with this email.";
                            break;
                        case 'auth/wrong-password':
                            errorMessage = "Incorrect password.";
                            break;
                        default:
                            errorMessage = `Error: ${error.message}`;
                    }
                    document.getElementById('error-message').textContent = errorMessage;
                });
        }
    </script>
</body>
</html>
